<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="bootstrap-table/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="bootstrap-table/bootstrap-table.css">
    <script type="text/javascript" src="bootstrap-table/jquery-2.1.0.js"></script>
    <script type="text/javascript" src="bootstrap-table/bootstrap-table.js"></script>
    <script type="text/javascript" src="bootstrap-table/bootstrap.min.js"></script>
</head>
<body>
<table id="table" data-show-columns="true"></table>
<script type="text/javascript">
    window.onload = function() {
        var result = {
            "State": 0,
            "Message": "请求成功",
            "Data": {
                "TerminalEquipmentId": "aa-bb-cc-dd",
                "Total": 0,
                "Result": [
                    {
                        "ActivityDate": "2019-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "27°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2018-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "28°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "29°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "30°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "31°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "32°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "33°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "34°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:54:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "35°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "36°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "37°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "38°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "39°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "40°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "41°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "42°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2017-07-06 05:53:47",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "43°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    },
                    {
                        "ActivityDate": "2010-07-06 05:53:17",
                        "Details": [
                            {
                                "DisplayName": "主机故障",
                                "NodeValue": "故障"
                            },
                            {
                                "DisplayName": "主机运行",
                                "NodeValue": "运行"
                            },
                            {
                                "DisplayName": "回水温度",
                                "NodeValue": "44°C"
                            },
                            {
                                "DisplayName": "供水压力",
                                "NodeValue": "0bar"
                            }
                        ]
                    }
                ]
            }
        }

        var longzhoufeng = []
        var customTime = ["时间"]

        for(var i = 0; i < result.Data.Result.length; i++) {

            var queryDataTime = []
            var aName=[]
            var aValue=[]

            queryDataTime.push(result.Data.Result[i].ActivityDate)

            for(var key in result.Data.Result[i].Details) {
                aName.push(result.Data.Result[i].Details[key].DisplayName)
                aValue.push(result.Data.Result[i].Details[key].NodeValue)
            }

            longzhoufeng.push(queryDataTime.concat(aValue))

          
        }


        for(var i = 0; i < longzhoufeng.length; i++) {

            console.log(longzhoufeng[i])

        }


        var aN=customTime.concat(unique(aName))

        var aV=queryDataTime.concat(aValue)


        // console.log( aV)


        function buildTable($el, cells, rows,hisName,hisVal) {
            var i, j, row,
                columns = [],
                data = [];
            for(i = 0; i < cells; i++) {
                columns.push({
                    field: 'field' + i,
                    title: hisName[i],
                });
            }
            for(i = 0; i < rows; i++) {
                row = {};
                for(j = 0; j < cells; j++) {
                    row['field' + j] = hisVal[i][j] + '-------'+i+'-' + j;
                }
                data.push(row);
            }
            $el.bootstrapTable('destroy').bootstrapTable({
                columns: columns,
                data: data
            });
        }

        buildTable($('#table'), aN.length, longzhoufeng.length,aN,longzhoufeng)
        function unique(arr) {
            return arr.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g, "$1$2$4").replace(/,,+/g, ",").replace(/,$/, "").split(",")
        }

        //var uniqueName=unique(aName)
    }
</script>
</body>
</html>